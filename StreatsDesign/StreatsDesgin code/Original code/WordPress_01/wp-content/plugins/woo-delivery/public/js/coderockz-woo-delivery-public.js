(function(a){a(function(){var d='';d+='<div class="coderockz-woo-delivery-loading-image">',d+='<div class="coderockz-woo-delivery-loading-gif">',d+='<img src="'+a('#coderockz_woo_delivery_setting_wrapper').data('plugin-url')+'public/images/loading.gif" alt="" />',d+='</div>',d+='</div>',a('#coderockz_woo_delivery_setting_wrapper').append(d),a('#coderockz_woo_delivery_time_field').selectWoo({allowClear:!0}),p=new Date();var o=a('#coderockz_woo_delivery_date_datepicker').data('selectable_dates');var r=a('#coderockz_woo_delivery_date_datepicker').data('date_format');var s=a('#coderockz_woo_delivery_date_datepicker').data('disable_week_days');var z=a('#coderockz_woo_delivery_date_datepicker').data('extra_label_text');var t=a('#coderockz_woo_delivery_date_datepicker').data('week_starts_from');var u=a('#coderockz_woo_delivery_date_datepicker').data('default_date');var v=a('#coderockz_woo_delivery_date_datepicker').data('disable_dates');var j=a('#coderockz_woo_delivery_time_field').data('default_time');var e=a('#coderockz_woo_delivery_time_field').data('order_limit_notice');var b=[];for(var k=0;k<o;k++){var c=new Date();var w=c.setDate(c.getDate()+k);var f=new Date(w);var g='0'+(Number(f.getMonth())+1);var p='0'+f.getDate();var h=f.getDay().toString();var q=f.getFullYear()+'-'+g.substr(-2)+'-'+p.substr(-2);a.inArray(q,v)===-1&&a.inArray(h,s)===-1?b.push(q):o+=1;}if(u){var x=b[0].substr(0,4);if(b[0].substr(5,1)=='0')var l=b[0].substr(6,1)-1;else var l=b[0].substr(5,2)-1;if(b[0].substr(8,1)=='0')var m=b[0].substr(9,1);else var m=b[0].substr(8,2);var n=new Date(x,l,m);}else var n='0000-00-00';if(a('#coderockz_woo_delivery_date_datepicker').length)a('#coderockz_woo_delivery_date_datepicker').flatpickr({enable:b,dateFormat:r,defaultDate:n,locale:{firstDayOfWeek:t},onChange:function(m,n,o){a('.coderockz-woo-delivery-loading-image').fadeIn(),a('#coderockz_woo_delivery_time_field').val(''),a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).attr('disabled');typeof b!==typeof undefined&&b!==!1&&a(this).attr('disabled',!1);var c=a(this).text();var d=c.indexOf(e);d!==-1&&a(this).text(c.substr(0,d));}),a('#coderockz_woo_delivery_time_field').selectWoo({allowClear:!0});var b=new Date();var h='0'+(b.getMonth()+1);var i='0'+b.getDate();var g=h.substr(-2)+'/'+i.substr(-2)+'/'+b.getFullYear();var c=b.getMinutes()+b.getHours()*60;var d=new Date(m);var k='0'+(d.getMonth()+1);var l='0'+d.getDate();var f=k.substr(-2)+'/'+l.substr(-2)+'/'+d.getFullYear();f==g&&a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).val().split(',');b[0]<=c&&b[1]<=c&&a(this).attr('disabled',!0);}),a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_get_orders',date:f},success:function(l){data=JSON.parse(l.data);var d=data.delivery_times;var h=data.max_order_per_slot;var b={};if(d.length>0){for(var i=0;d.length>i;i++)b[d[i]]=(b[d[i]]||0)+1;for(var k in b){if(!b.hasOwnProperty(k))continue;typeof h!==typeof undefined&&h!==!1&&b[k]>=h&&h!=0&&a('#coderockz_woo_delivery_time_field option').each(function(){a(this).val()==k&&(a(this).attr('disabled',!0),a(this).text(a(this).text()+e));});}}f==g&&data.disabled_current_time_slot&&a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).val().split(',');b[0]<=c&&b[1]>c&&a(this).attr('disabled',!0);}),j&&a('#coderockz_woo_delivery_time_field option').each(function(){return!a(this).is('[disabled=disabled]')&&a(this).val()!=''?(selectedField=a(this).index(),a(this).attr('selected',!0),!1):void 0;}),a('#coderockz_woo_delivery_time_field').selectWoo({allowClear:!0}),a('.coderockz-woo-delivery-loading-image').fadeOut();}});},onReady:function(n,o,h){a('.coderockz-woo-delivery-loading-image').fadeIn(),a('#coderockz_woo_delivery_time_field').val(''),a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).attr('disabled');typeof b!==typeof undefined&&b!==!1&&a(this).attr('disabled',!1);var c=a(this).text();var d=c.indexOf(e);d!==-1&&a(this).text(c.substr(0,d));}),a('#coderockz_woo_delivery_time_field').selectWoo({allowClear:!0});var c=new Date();var i='0'+(c.getMonth()+1);var k='0'+c.getDate();var f=i.substr(-2)+'/'+k.substr(-2)+'/'+c.getFullYear();var b=c.getMinutes()+c.getHours()*60;var g=new Date(h.selectedDates[0]);var l='0'+(g.getMonth()+1);var m='0'+g.getDate();if(h.selectedDates.length>0)var d=l.substr(-2)+'/'+m.substr(-2)+'/'+g.getFullYear();else var d=f;d==f&&a('#coderockz_woo_delivery_time_field option').each(function(){var c=a(this).val().split(',');c[0]<=b&&c[1]<=b&&a(this).attr('disabled',!0);}),a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_get_orders',date:d},success:function(l){data=JSON.parse(l.data);var g=data.delivery_times;var h=data.max_order_per_slot;var c={};if(g.length>0){for(var i=0;g.length>i;i++)c[g[i]]=(c[g[i]]||0)+1;for(var k in c){if(!c.hasOwnProperty(k))continue;typeof h!==typeof undefined&&h!==!1&&c[k]>=h&&h!=0&&a('#coderockz_woo_delivery_time_field option').each(function(){a(this).val()==k&&(a(this).attr('disabled',!0),a(this).text(a(this).text()+e));});}}d==f&&data.disabled_current_time_slot&&a('#coderockz_woo_delivery_time_field option').each(function(){var c=a(this).val().split(',');c[0]<=b&&c[1]>b&&a(this).attr('disabled',!0);}),(typeof a('#coderockz_woo_delivery_date_datepicker').val()==typeof undefined&&a('#coderockz_woo_delivery_date_datepicker').val()==0||a('#coderockz_woo_delivery_date_datepicker').val()=='')&&a('#coderockz_woo_delivery_time_field option').each(function(){var c=a(this).val().split(',');c[0]<=b&&c[1]<=b&&a(this).attr('disabled',!0);}),j&&a('#coderockz_woo_delivery_time_field option').each(function(){return!a(this).is('[disabled=disabled]')&&a(this).val()!=''?(a(this).attr('selected',!0),!1):void 0;}),a('#coderockz_woo_delivery_time_field').selectWoo({allowClear:!0});}}),a('.coderockz-woo-delivery-loading-image').fadeOut();}});else{var c=new Date();var g='0'+(c.getMonth()+1);var h='0'+c.getDate();var y=g.substr(-2)+'/'+h.substr(-2)+'/'+c.getFullYear();var i=c.getMinutes()+c.getHours()*60;a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_get_orders',onlyDeliveryTime:!0,date:y},success:function(h){data=JSON.parse(h.data);var c=data.delivery_times;var d=data.max_order_per_slot;var b={};if(c.length>0){for(var f=0;c.length>f;f++)b[c[f]]=(b[c[f]]||0)+1;for(var g in b){if(!b.hasOwnProperty(g))continue;typeof d!==typeof undefined&&d!==!1&&b[g]>=d&&d!=0&&a('#coderockz_woo_delivery_time_field option').each(function(){a(this).val()==g&&(a(this).attr('disabled',!0),a(this).text(a(this).text()+e));});}}data.disabled_current_time_slot&&a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).val().split(',');b[0]<=i&&b[1]>i&&a(this).attr('disabled',!0);}),a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).val().split(',');b[0]<=i&&b[1]<=i&&a(this).attr('disabled',!0);}),j&&a('#coderockz_woo_delivery_time_field option').each(function(){return!a(this).is('[disabled=disabled]')&&a(this).val()!=''?(a(this).attr('selected',!0),!1):void 0;}),a('#coderockz_woo_delivery_time_field').selectWoo({allowClear:!0});}});}});}(jQuery));